<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.feakin.intellij</id>
    <name>Feakin</name>
    <vendor>phodal</vendor>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File-type Factory -->
        <fileType name="Feakin File"
                  language="Feakin"
                  implementationClass="com.feakin.intellij.FkFileType"
                  fieldName="INSTANCE"
                  extensions="fkl"/>
        <internalFileTemplate name="Feakin File"/>

        <!-- Parser -->

        <lang.parserDefinition language="Feakin"
                               implementationClass="com.feakin.intellij.parser.FeakinParserDefinition"/>

        <lang.syntaxHighlighter language="Feakin"
                                implementationClass="com.feakin.intellij.highlight.FeakinSyntaxHighlighter"/>

        <lang.psiStructureViewFactory language="Feakin"
                                      implementationClass="com.feakin.intellij.structure.FkStructureViewFactory"/>

        <!-- Editor -->
        <extendWordSelectionHandler implementation="com.feakin.intellij.ide.editor.FeakinBlockSelectionHandler"/>
        <lang.foldingBuilder language="Feakin"
                             implementationClass="com.feakin.intellij.edit.FeakinFoldingBuilder"/>

        <lang.commenter language="Feakin" implementationClass="com.feakin.intellij.completion.FeakinCommenter"/>
        <lang.braceMatcher language="Feakin" implementationClass="com.feakin.intellij.ide.FkBraceMatcher"/>


        <!-- Navigate between useDomainObject and DomainObjectDecl -->
        <indexedRootsProvider implementation="com.feakin.intellij.indexing.FkIndexableSetContributor"/>

        <stubElementTypeHolder class="com.feakin.intellij.lexer.FeakinElementTypes"/>

        <stubIndex implementation="com.feakin.intellij.psi.index.FkNamedElementIndex"/>
        <stubIndex implementation="com.feakin.intellij.psi.index.FkGotoClassIndex"/>
        <!-- TODO: add support for goto -->
        <gotoClassContributor implementation="com.feakin.intellij.ide.navigate.FkGotoClassContributor"/>
        <gotoSymbolContributor implementation="com.feakin.intellij.ide.navigate.FkGotoSymbolContributor"/>

        <!-- Completion -->
        <completion.contributor language="Feakin"
                                implementationClass="com.feakin.intellij.completion.FkKeywordCompletionContributor"
                                id="FkKeywordCompletionContributor"
                                order="first"/>


        <!-- Line Marker Providers -->
        <codeInsight.lineMarkerProvider language="Feakin"
                                        implementationClass="com.feakin.intellij.linemarkers.FkImplMessageProvider"/>
        <codeInsight.lineMarkerProvider language="Feakin"
                                        implementationClass="com.feakin.intellij.linemarkers.FkImplMethodProvider"/>

        <runLineMarkerContributor language="Feakin"
                                  implementationClass="com.feakin.intellij.linemarkers.FkImplLineMarkerContributor"/>

        <!-- Run Configurations -->
        <configurationType implementation="com.feakin.intellij.runconfig.FkCommandConfigurationType"/>

        <programRunner implementation="com.feakin.intellij.runconfig.FkCommandRunner"/>

        <runConfigurationProducer
                implementation="com.feakin.intellij.runconfig.command.FkRunConfigurationProducer"/>

        <!-- Formatter -->
        <lang.formatter language="Feakin" implementationClass="com.feakin.intellij.formatter.FkFormattingModelBuilder"/>

        <!-- Usages Provider -->
        <lang.findUsagesProvider language="Feakin" implementationClass="com.feakin.intellij.ide.search.FkFindUsagesProvider"/>
        <findUsagesHandlerFactory implementation="com.feakin.intellij.ide.search.FkFindUsagesHandlerFactory"/>
    </extensions>
</idea-plugin>
